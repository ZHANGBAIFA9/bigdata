### RFM是什么

R:(Recency) 最近一次消费时间：表示用户最近一次消费距离现在的时间，消费时间越近的客户价值越大。

（即：一年前消费的用户肯定没有一周前消费的用户价值大）

F:(Frequency)消费频率：消费频率是指用户在统计周期内购买商品的次数，经常购买的用户也就是熟客，价值比偶尔来一次的客户价值大。

M:(Monetary)消费金额：消费金额是指用户在统计周期内消费的总金额，体现了消费者为企业创利多少，自然是消费越多的用户价值越大。

注：RFM模型应用时，至少包含用户id，交易金额及交易时间等三个字段。

### RFM模型

​	![1607911530358](C:\Users\浩鲸新智能\AppData\Roaming\Typora\typora-user-images\1607911530358.png)

[^基于三个维度构建三维坐标系进行用户价值评分划级]: 

​	![1607911674854](C:\Users\浩鲸新智能\AppData\Roaming\Typora\typora-user-images\1607911674854.png)

**RFM模型的核心价值：**

​	某个用户最近一次消费时间距今比较久远，没有再消费了，但是累计消费金额和消费频次都很高，说明这个用户曾经很有价值也就是RFM模型中的重要保持客户，我们不希望他流失，所以运营人员就会专门针对这类型用户设计召回策略。
**默认前提：**

​	最近有过交易行为的客户，二次发生交易的可能性要高于最近没有交易行为的客户；

​	交易频率较高的客户比交易频率较低的客户，更有可能发生二次交易；

​	过去所有交易总金额较多的客户，比交易总金额较少的客户，更有可能发生二次交易。

**R值=当前时间-最近消费时间**

**F值=消费次数**

**M值=消费总额**

### RFM模型问题

​	R值表示最近一次消费时间距离当前时间，消费时间越近(小)的价值越大；

​	F值表示消费次数，消费次数越大价值越大；

​	M值表示消费总额，消费总额越大价值越大。

三个值不在同一个描述维度，R、F、M三个值存在量级问题，以下提供两种解决办法，算法&评分方式。

#### 1、评分方式

​	评分方式即根据三组数据各个值的特性，采用5分制为各个数据赋予一个评分值，R值的评分机制是R值越大，评分越小，F、M值两个机制即F、M值越大，评分越大。

​	基于三组数据对应的评分值来计算分值的平均数，大于等于平均数的划到高维度，低于平均数的数据划到低纬度，自然将三组数据每组分别划分为高低两组，交叉组合之后就是8中情况。三组数据对应的评分值累加即RFM值。**RFM总分值=R分值+F分值+M分值**

**评分机制优势**

​	计算RFM值时解决了不同数据量级数据相加时影响权重不均衡的问题，由于用户的交易行为中R值和F值相对较小，如果三个值不处理就相加，M值直接决定总值的量级，R值、F值对总值的影响较小，无法体现出用户真实价值。**RFM总值=R值+F值+M值**（将数据映射到1-5区间内，保证数据之间的可比性）

**评分机制劣势**

​	赋值指标设定需要资深的业务经验，什么样算高频，什么样的算高额都是经验，并且用户的消费数据时不断膨胀的，根据手动设定的划分区间无法随着数据不断膨胀而自动适配所以需要根据经验和数据反馈不断修正。

#### 2、算法方式

​	算法方式是根据数据特性将数据基于模型处理后量化用户价值，来划分高低维度、量化用户价值两个步骤。

#### 2.1、划分高低维度

​	根据数据分布情况将数据划分为高低两组，采用四分位数(即：将数据由小到大排列并分成四等份，处于三个分割点位置的数值就是四分位数，处于正中位置的数值就是中位数，如果数组个数为奇数个，则中位数为排序后中间的一个数，数组个数为偶数个，则中位数为排序后中间两个数的平均数)，而非平均数。

​	由于大部分数据呈长尾分布，并且80%-90%都集中在低频低额区间，采用平均数无法很好的体现数组特性，长尾用户很容易被平均。

注意：由于R值的大小与用户价值呈反比，所以位于高分位的时候算低纬度，低于分位数的算高纬度。

#### 2.2、量化用户价值

​	首先解决R、F、M三值量级不均衡的问题，然后计算RFM总值量化用户价值，即将三组数据无量纲化处理映射到0到1区间内，然后合理放大后相加。

​	**归一化：**

​		![1607916578704](C:\Users\浩鲸新智能\AppData\Roaming\Typora\typora-user-images\1607916578704.png)

注：min是数组中的最小值，max是数组中的最大值。只要将数组中的数据依次经过上述公式处理，原数组收敛到了0至1的区间之内。

​	![1607916709743](C:\Users\浩鲸新智能\AppData\Roaming\Typora\typora-user-images\1607916709743.png)

[^随机生成样例数据]: 

​	第一组源数据经过无量纲化处理后收敛至了0到1区间之内，可将不同量级的数据归一化至同一量级，归一化后的数据是一个位数极多的小数，而一般用户对于极小数和极大数没有直观的感受。

​	把所有的数据同比放大了100倍，将源数据扩大到了0至100的区间，同时做了四舍五入，让数据可读性更强。经过这样的处理就将数据从原来不同量级无法直观对比，归一化到了0至100的区间，方便直观计算RFM总值。

计算RFM总值的公式如下：**RFM总值 = R值\*（-1）+F值+M值+100；**

​	为了解决R值同F、M值统计维度不一样的问题，这里给R值乘以了负1，同时为了保证数据结果不会出现负数，又在最后加了100。这样处理之后保证最后的RFM总值落在了0至400的区间之内。

**RFM核心：RFM最终的目的就是帮助业务提高运营效率和产出价值，一是通过经验划分用户群体，二是通过数据挖掘，给与业务运营建议。**

